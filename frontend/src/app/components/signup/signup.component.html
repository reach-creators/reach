<div
  class="flex justify-center items-center min-h-screen bg-gradient-to-br from-indigo-400 to-purple-700 p-5"
>
  <p-card>
    <div class="flex flex-col gap-6 items-center">
      <p class="font-bold text-lg">Sign Up</p>
      <input-with-icon
        icon="pi-user"
        label="Email"
        [inputControl]="signupModel.email"
      />
      <input-with-icon
        icon="pi-lock"
        label="Password"
        [isPassword]="true"
        [inputControl]="signupModel.password"
      />
      <input-with-icon
        icon="pi-lock"
        label="Confirm Password"
        [isPassword]="true"
        [inputControl]="signupModel.passwordConfirmation"
      />
      <p-select
        class="self-start min-w-[100%]"
        [options]="signupModel.getRoles()"
        placeholder="Select Role"
        [formControl]="signupModel.role"
      >
        <ng-template let-role pTemplate="item">
          {{ toTitleCase(role) }}
        </ng-template>
        <ng-template let-role pTemplate="selectedItem">
          {{ toTitleCase(role) }}
        </ng-template>
      </p-select>
      <button pButton type="submit" class="w-full" (click)="signupUser()">
        Next
      </button>
    </div>
  </p-card>
  <form
    *ngIf="step === 1"
    [formGroup]="signupForm"
    (ngSubmit)="nextStep()"
    class="bg-white rounded-2xl shadow-2xl p-10 w-full max-w-lg animate-slideUp"
  >
    <h2 class="text-2xl font-bold text-gray-900 mb-2 text-center">Sign Up</h2>
    <div class="mb-4 flex flex-col gap-1">
      <label for="username" class="font-semibold text-gray-700 text-sm mb-1"
        >Username</label
      >
      <input
        id="username"
        type="text"
        pInputText
        formControlName="username"
        class="px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 bg-white"
      />
      <div
        *ngIf="
          signupForm.get('username')?.invalid &&
          signupForm.get('username')?.touched
        "
        class="text-red-600 text-xs mt-1 flex items-center gap-1"
      >
        <span class="text-base">&#9888;</span> Username is required
      </div>
    </div>
    <div class="mb-4 flex flex-col gap-1">
      <label for="password" class="font-semibold text-gray-700 text-sm mb-1"
        >Password</label
      >
      <input
        id="password"
        type="password"
        pInputText
        formControlName="password"
        class="px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 bg-white"
      />
      <div
        *ngIf="
          signupForm.get('password')?.invalid &&
          signupForm.get('password')?.touched
        "
        class="text-red-600 text-xs mt-1 flex items-center gap-1"
      >
        <span class="text-base">&#9888;</span>
        <span *ngIf="signupForm.get('password')?.errors?.['required']"
          >Password is required</span
        >
        <span *ngIf="signupForm.get('password')?.errors?.['minlength']"
          >Password must be at least 8 characters</span
        >
        <span *ngIf="signupForm.get('password')?.errors?.['pattern']"
          >Password must contain uppercase, lowercase, number, and symbol</span
        >
      </div>
    </div>
    <div class="mb-4 flex flex-col gap-1">
      <label
        for="confirmPassword"
        class="font-semibold text-gray-700 text-sm mb-1"
        >Confirm Password</label
      >
      <input
        id="confirmPassword"
        type="password"
        pInputText
        formControlName="confirmPassword"
        class="px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 bg-white"
      />
      <div
        *ngIf="
          signupForm.get('confirmPassword')?.invalid &&
          signupForm.get('confirmPassword')?.touched
        "
        class="text-red-600 text-xs mt-1 flex items-center gap-1"
      >
        <span class="text-base">&#9888;</span> Confirm your password
      </div>
      <div
        *ngIf="
          signupForm.errors?.['passwordMismatch'] &&
          (signupForm.get('confirmPassword')?.touched ||
            signupForm.get('password')?.touched)
        "
        class="text-red-600 text-xs mt-1 flex items-center gap-1"
      >
        <span class="text-base">&#9888;</span> Passwords do not match
      </div>
    </div>
    <div class="mb-4 flex flex-col gap-1">
      <label for="type" class="font-semibold text-gray-700 text-sm mb-1"
        >Sign Up As</label
      >
      <p-select
        id="type"
        [options]="typeOptions"
        formControlName="type"
        placeholder="Select type"
        class=""
      ></p-select>
      <div
        *ngIf="
          signupForm.get('type')?.invalid && signupForm.get('type')?.touched
        "
        class="text-red-600 text-xs mt-1 flex items-center gap-1"
      >
        <span class="text-base">&#9888;</span> Type is required
      </div>
    </div>
  </form>

  <form
    *ngIf="step === 2 && signupForm.value.type === 'brand'"
    [formGroup]="brandForm"
    (ngSubmit)="submitBrand()"
    class="bg-white rounded-2xl shadow-2xl p-10 w-full max-w-lg animate-slideUp"
  >
    <h2 class="text-2xl font-bold text-gray-900 mb-2 text-center">
      Brand Signup
    </h2>
    <div class="mb-4 flex flex-col gap-1">
      <label for="brandName" class="font-semibold text-gray-700 text-sm mb-1"
        >Brand Name</label
      >
      <input
        id="brandName"
        type="text"
        pInputText
        formControlName="name"
        class="px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 bg-white"
      />
      <div
        *ngIf="brandForm.get('name')?.invalid && brandForm.get('name')?.touched"
        class="text-red-600 text-xs mt-1 flex items-center gap-1"
      >
        <span class="text-base">&#9888;</span> Brand name is required
      </div>
    </div>
    <div class="mb-4 flex flex-col gap-1">
      <label
        for="revenuePerMonth"
        class="font-semibold text-gray-700 text-sm mb-1"
        >Revenue Per Month</label
      >
      <input
        id="revenuePerMonth"
        type="number"
        pInputText
        formControlName="revenuePerMonth"
        class="px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 bg-white"
      />
    </div>
    <div class="mb-4 flex flex-col gap-1">
      <label for="itemsSold" class="font-semibold text-gray-700 text-sm mb-1"
        >Items Sold</label
      >
      <input
        id="itemsSold"
        type="number"
        pInputText
        formControlName="itemsSold"
        class="px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 bg-white"
      />
    </div>
    <div class="mb-4 flex flex-col gap-1">
      <label
        for="averageUnitPrice"
        class="font-semibold text-gray-700 text-sm mb-1"
        >Average Unit Price</label
      >
      <input
        id="averageUnitPrice"
        type="number"
        pInputText
        formControlName="averageUnitPrice"
        class="px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 bg-white"
      />
    </div>
    <div class="mb-4 flex flex-col gap-1">
      <label for="niches" class="font-semibold text-gray-700 text-sm mb-1"
        >Niches</label
      >
      <p-multiSelect
        [options]="nicheOptions"
        formControlName="niches"
        defaultLabel="Select niches"
        class=""
      ></p-multiSelect>
    </div>
    <div class="mb-4 flex flex-col gap-1">
      <label for="region" class="font-semibold text-gray-700 text-sm mb-1"
        >Region</label
      >
      <input
        id="region"
        type="text"
        pInputText
        formControlName="region"
        class="px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 bg-white"
      />
    </div>
    <div class="flex gap-2 mt-2">
      <button
        pButton
        type="button"
        label="Back"
        (click)="prevStep()"
        class="flex-1 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg shadow hover:bg-gray-300 transition-all"
      ></button>
      <button
        pButton
        type="submit"
        label="Sign Up"
        class="flex-1 py-3 bg-gradient-to-r from-indigo-400 to-purple-600 text-white font-semibold rounded-lg shadow-md hover:from-indigo-500 hover:to-purple-700 transition-all"
      ></button>
    </div>
  </form>

  <div
    *ngIf="step === 2 && signupForm.value.type === 'creator'"
    class="w-full max-w-lg"
  >
    <app-signup-creator />
    <button
      pButton
      type="button"
      label="Back"
      (click)="prevStep()"
      class="w-full py-3 mt-5 bg-gray-200 text-gray-700 font-semibold rounded-lg shadow hover:bg-gray-300 transition-all"
    ></button>
  </div>
</div>
